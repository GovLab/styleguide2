$(document).ready(function(){function t(){$(window).scrollTop(o)}function e(){$(".fuzzy-search").val(""),a(),r.search()}function a(){$(".table-sortable__search--active").each(function(){$(this).removeClass("table-sortable__search--active")})}function s(t){d3.select("path#"+d(t)).classed("active",!0)}$("a[href*=#]:not([href=#])").click(function(){var t=$(this.hash),e=this.hostname,a=location.hostname,s=this.pathname.replace(/^\//,""),o=location.pathname.replace(/^\//,"");return t.length||(t=$("[name="+this.hash.slice(1)+"]")),!t.length||e!==a&&s!==o||($("html, body").animate({scrollTop:t.offset().top},1e3),!1)});var o=0;$(".js-open-modal").click(function(){$(this).parent().find(".js-target-modal").addClass("js-active"),o=$(window).scrollTop(),$(window).bind("scroll",t),$("#overlay").addClass("js-active"),$("body").addClass("js-body-modal-active")}),$("footer .js-close-modal").on("click",function(t){t.preventDefault()}),$("body").on("click",".js-close-modal",function(){o=$(window).scrollTop(),$(window).unbind("scroll"),$(".js-target-modal").removeClass("js-active"),$("#overlay").removeClass("js-active"),$("body").removeClass("js-body-modal-active")}),$("#overlay").click(function(){$(".js-active").removeClass("js-active"),o=$(window).scrollTop(),$(window).unbind("scroll"),$(".js-active-menu").removeClass("js-active-menu"),$("body").removeClass("js-body-modal-active")}),$(".js-close-sticky").click(function(){$(".js-target-sticky").removeClass("js-active")}),$(".js-trigger-search").click(function(t){t.preventDefault(),$(this).parent().addClass("js-active"),$("#overlay").addClass("js-active")}),$(".js-trigger-menu").click(function(t){$(this).next().addClass("js-active-menu"),$("#overlay").addClass("js-active")}),$("#overlay").click(function(){$(".js-active").removeClass("js-active"),$(".js-active-menu").removeClass("js-active-menu")}),$(".slider").slick({arrows:!0,draggable:!1,swipeToSlide:!0,autoplay:!0,autoplaySpeed:3e3,responsive:[{breakpoint:800,settings:{draggable:!0}}]}),$(".js-open-table-search").click(function(t){t.preventDefault(),$(this).parent().siblings(".table-sortable__search").toggleClass("table-sortable__search--active")});var n=$(".table-sortable__search").find("button[type='submit']");n.on("click",function(t){t.preventDefault(),$(this).parent().hasClass("table-sortable__search--active")&&$(this).parent().removeClass("table-sortable__search--active"),e()});var c=$(".table-sortable__control > i:contains('keyboard_arrow_down')");c.on("click",function(){"keyboard_arrow_down"==$(this).text()?$(this).text("keyboard_arrow_up"):$(this).text("keyboard_arrow_down")}),$("body").keyup(function(t){"27"==t.keyCode&&($(this).parent().find(".table-sortable__search").removeClass("table-sortable__search--active"),e())});var i={valueNames:[{name:"item__name",attr:"data-target"},"item__category","item__date","item__location"]},r=new List("items",i);$(".js-open-table-search").on("click",function(t){$(this).addClass("table-sortable__search--active"),$($(this).attr("data-target")).focus()}),$(".fuzzy-search").keyup(function(){var t=$(this).val();r.fuzzySearch(t,["item__name"])});var l=!0;$(".js-open-accordion").click(function(){l?($(this).siblings().removeClass("js-active"),$(this).addClass("js-active"),l=!1):$(this).is(".js-active")?($(this).removeClass("js-active"),l=!0):($(this).siblings().removeClass("js-active"),$(this).addClass("js-active"),l=!1),console.log(l)}),$(".palette__item h1").each(function(){var t=$(this).text();$(this).parent().css("background-color",t),console.log(t)}),$(".palette__item--rgb h3").each(function(){var t=$(this).text();$(this).parent().css("background-color",t),console.log(t)});var d=function(t){return t.replace(/\W+/g,"-").toLowerCase()},u=function(t,e){var a=t.select("#"+e).datum(),s=f.bounds(a);return[(s[0][0]+s[1][0])/2,(s[0][1]+s[1][1])/2]};active=d3.select(null);var v=960,h=360,p=d3.select("#map-wrapper").append("svg").attr("width",v).attr("height",h),f=d3.geo.path(),m=d3.geo.albersUsa().translate([v/2,h/2]).scale([800]),f=d3.geo.path().projection(m),b=d3.select("#caption").append("div").attr("class","map-tooltip").style("opacity",0);d3.json("us.json",function(t){p.selectAll("append").data(t.features).enter().append("path").attr("d",f).attr("class","path").attr("id",function(t){return d(t.properties.name)}),d3.json("womenplus-locations.json",function(t,e){function a(){return active.node()===this?o():(active.classed("active",!1),void(active=d3.select(this).classed("active",!0)))}function o(){active.classed("active",!1),active=d3.select(null)}e=e.sort(function(t,e){return e.count-t.count}),p.selectAll("circle").data(e).enter().append("circle").attr("class","circle").attr("id",function(t){return d(t.location)}).attr("data-location",function(t){return s(t.location),t.location}).attr("cx",function(t){return u(p,d(t.location))[0]}).attr("cy",function(t){return u(p,d(t.location))[1]}).attr("r",function(t){return 15*Math.sqrt(t.count)}).on("mouseover",function(t){b.transition().duration(200).style("opacity",1),1==t.count?b.html(t.location+" | "+t.count+" expert"):b.html(t.location+" | "+t.count+" experts"),d3.select(this).transition().delay(0).duration(750).attr("r",function(t){return 20*Math.sqrt(t.count)})}).on("mouseout",function(t){b.transition().duration(500).style("opacity",0),d3.select(this).transition().duration(750).attr("r",function(t){return 15*Math.sqrt(t.count)})}).on("click",a),p.selectAll("text").data(e).enter().append("text").attr("x",function(t){return u(p,d(t.location))[0]}).attr("y",function(t){return u(p,d(t.location))[1]}).attr("text-anchor","middle").attr("dy","6").text(function(t){return t.count}).attr("class","number")})})});